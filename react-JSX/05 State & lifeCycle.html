<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="root"></div>
</body>
<script src="js/babel.js"></script>
<script src="js/react.js"></script>
<script src="js/react-dom.js"></script>
<script type="text/babel">

    //调用ReactDOM,render() 更新UI

    //错了
    // function tick(){
    //     const element = {
    //
    //     }
    // }
    //

    function tick(){
        const element = (
            <div>
                <h1>Hello, world</h1>
                <h2>It is {new Date().toLocaleTimeString()}.</h2>
            </div>
        );
        ReactDOM.render(element, document.getElementById('root'))
    }

    setInterval(tick, 1000);

    //封装时钟
    ReactDOM.render(
        <Clock />
        document.getElementById('root')
    )

//     为了实现这个需求，我们需要为Clock组件添加”状态(state)”
//
// 状态与属性十分相似，但是状态是私有的，完全受控于当前组件。
//
// 我们之前提到过，定义为类的组件有一些额外的特性。局部状态就是如此：只能用于类的一个功能。

    // 将函数转换为类

    class Clock extends React.Component{
        render (){
            return(
                <div>
                    <h1>Hello, world</h1>
                    <h2>It is {this.props.date.toLocaleTimeString()}. </h2>
                </div>
            )
        }
    }
    // Clock 现在被定义为一个类而不只是一个函数

    //为一个类添加局部状态
    // 1在 render() 方法中使用 this.state.date 替代 this.props.date
    class Clock extends React.Component{
        render(){
            return(
                <div>
                    <h1>Hello, world!</h1>
                    <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
                </div>

            )
        }
    }
    //2 添加一个类构造函数来初始化状态 this.state
    class Clock extends React.Component{
        constructor(props){
            super(props);
            this.state = {date: new Date()};
        }

        render() {
            return (
                <div>
                    <h1>Hello, world!</h1>
                    <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
                </div>
            )
        }
    }

    //类件形式 class 组件名 extends React.Component{}

    class Clock extends React.Component{
        constructor(props){
            super(props);
            this.state = {date: new Date()};
        }

        render(){
            return(
                <div>
                    <h1></h1>
                    <h2>It is {this.state.date.toLocaleTimeString()}</h2>
                </div>
            )
        }
    }

    传递props 到基础构造函数

    constructor(props){
        super(props);
        this.state = {date: new Date()};
    }
    //从 Clock 中以移除 date 属性
    ReactDOM.render(
        <Clock />
        document.getElementById('root')
    )

    class Clock extends React.component(){
        constructor(props){
            super(props);
            this.state = {date: new Date()}
        }

        render(){
            return(
                <div>
                    <h1>Hello </h1>
                </div>
            )
        }
    }

    ReactDOM.render(
        <Clock />
        document.getElementById('root')
    )


    // 生命周期钩子
    //组件挂载或者卸载时 运行的一些代码

    class Clock extends React.Component{
        constructor(props){
            super(props);
            this.state = {date: new Date()}
        }

        componentDidMount(){

        }

        componentWillUnmount(){

        }

        render(){
            return(
                <div>
                    <h1></h1>
                    <h2>It is {this.state.toLocaleDateString()}</h2>
                </div>
            )
        }

    }

    // 挂载时建立定时器
    componentDidMount(){
        this.timerID = setInterval(
            () => this.tick(),
            1000
        )
    }

    //卸载时卸载生命周期钩子
    componentWillUnmount(){
        clearInterval(this.timerID);
    }



</script>
</html>